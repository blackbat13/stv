<?xml version="1.0" encoding="utf-8"?><!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'><nta><declaration>// Place global declarations here.
const int no_candidates = 2;
chan coerce, enter_vote, share, not_share, request, send_to_wbb, print, infect_vm, notify_ok, notify_not_ok;
int ca, v;</declaration><template><name x="5" y="5">Voter</name><declaration>bool p_start = true;
bool p_polling_station = false;
bool p_printing = false;
bool p_has_ballot = false;
bool p_check1 = false;
bool p_scanning = false;
bool p_voted = false;
bool p_check2_ok = false;
bool p_cast = false;
bool p_check2_fail = false;
bool p_check3 = false;
bool p_error = false;
bool p_send = false;
bool p_shred = false;
bool p_outside_ps = false;
bool p_check_request = false;
bool p_checkWBB = false;
bool p_checkWBB_fail = false;
bool p_checkWBB_ok = false;
bool p_end = false;
bool per_check1=false;
bool per_check3=false;


int counter=0;</declaration><location id="id0" x="1384" y="-24"><name x="1384" y="-16">send</name><committed/></location><location id="id1" x="488" y="0"><name x="448" y="24">polling_station</name><committed/></location><location id="id2" x="1368" y="-232"><name x="1328" y="-216">check_request</name><committed/></location><location id="id3" x="1088" y="32"><name x="1056" y="48">check2_ok</name><committed/></location><location id="id4" x="1288" y="-408"><name x="1304" y="-424">checkWBB_ok</name><committed/></location><location id="id5" x="1176" y="-408"><name x="1056" y="-408">checkWBB_fail</name><committed/></location><location id="id6" x="1232" y="-456"><name x="1216" y="-488">end</name></location><location id="id7" x="1088" y="-144"><name x="1080" y="-176">check3</name><committed/></location><location id="id8" x="1232" y="-360"><name x="1152" y="-352">checkWBB</name><committed/></location><location id="id9" x="1232" y="-232"><name x="1152" y="-256">outside_ps</name><committed/></location><location id="id10" x="1232" y="-128"><name x="1248" y="-144">shred</name><committed/></location><location id="id11" x="1232" y="0"><name x="1240" y="8">cast</name><committed/></location><location id="id12" x="1016" y="-80"><name x="928" y="-88">check2_fail</name><committed/></location><location id="id13" x="608" y="-144"><name x="624" y="-160">check1</name><committed/></location><location id="id14" x="952" y="-408" color="#ff0000"><name x="936" y="-440">error</name></location><location id="id15" x="952" y="0"><name x="936" y="16">voted</name><committed/></location><location id="id16" x="840" y="0"><name x="816" y="16">scanning</name><committed/></location><location id="id17" x="728" y="0"><name x="696" y="16">has_ballot</name><committed/></location><location id="id18" x="608" y="0"><name x="584" y="16">printing</name><committed/></location><location id="id19" x="384" y="0"><name x="368" y="16">start</name><committed/></location><init ref="id19"/><transition><source ref="id0"/><target ref="id9"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station &amp;&amp; !(p_has_ballot &amp;&amp; counter==0) &amp;&amp; !p_has_ballot &amp;&amp; !p_scanning &amp;&amp; !p_voted &amp;&amp; !(p_check2_ok || p_check2_fail) &amp;&amp; !p_cast &amp;&amp; !p_send) &amp;&amp; p_shred)</label><label kind="assignment" x="1344" y="-152">p_outside_ps=true,
p_send=false</label><label kind="comments">leave</label><nail x="1312" y="-168"/></transition><transition><source ref="id0"/><target ref="id10"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station &amp;&amp; !(p_has_ballot &amp;&amp; counter==0) &amp;&amp; !p_has_ballot &amp;&amp; !p_scanning &amp;&amp; !p_voted &amp;&amp; !(p_check2_ok || p_check2_fail) &amp;&amp; !p_cast) &amp;&amp; p_send)</label><label kind="assignment" x="1248" y="-88">p_shred=true,
p_send=false</label><label kind="comments">shred</label></transition><transition><source ref="id11"/><target ref="id0"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station &amp;&amp; !(p_has_ballot &amp;&amp; counter==0) &amp;&amp; !p_has_ballot &amp;&amp; !p_scanning &amp;&amp; !p_voted &amp;&amp; !(p_check2_ok || p_check2_fail)) &amp;&amp; p_cast)</label><label kind="synchronisation" x="1272" y="-8">send_to_wbb!</label><label kind="assignment" x="1280" y="8">p_send=true,
p_cast=false</label><label kind="comments">send_to_wbb</label></transition><transition><source ref="id15"/><target ref="id11"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station &amp;&amp; !(p_has_ballot &amp;&amp; counter==0) &amp;&amp; !p_has_ballot &amp;&amp; !p_scanning &amp;&amp; !p_voted &amp;&amp; !(p_check2_ok || p_check2_fail) &amp;&amp; !p_cast &amp;&amp; !p_send &amp;&amp; !p_shred &amp;&amp; !p_check_request &amp;&amp; !p_checkWBB) &amp;&amp; true)</label><label kind="assignment" x="1072" y="128">p_cast=true,
p_voted=false</label><label kind="comments">skip</label><nail x="1016" y="120"/><nail x="1200" y="120"/></transition><transition><source ref="id2"/><target ref="id8"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station &amp;&amp; !(p_has_ballot &amp;&amp; counter==0) &amp;&amp; !p_has_ballot &amp;&amp; !p_scanning &amp;&amp; !p_voted &amp;&amp; !(p_check2_ok || p_check2_fail) &amp;&amp; !p_cast &amp;&amp; !p_send &amp;&amp; !p_shred) &amp;&amp; p_check_request)</label><label kind="synchronisation" x="1312" y="-368">not_share!</label><label kind="assignment" x="1376" y="-312">p_checkWBB=true,
p_check_request=false</label><label kind="comments">not_share</label><nail x="1368" y="-328"/></transition><transition><source ref="id19"/><target ref="id1"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station &amp;&amp; !(p_has_ballot &amp;&amp; counter==0) &amp;&amp; !p_has_ballot &amp;&amp; !p_scanning &amp;&amp; !p_voted &amp;&amp; !(p_check2_ok || p_check2_fail) &amp;&amp; !p_cast &amp;&amp; !p_send &amp;&amp; !p_shred &amp;&amp; !p_check_request &amp;&amp; !p_checkWBB) &amp;&amp; true)</label><label kind="synchronisation" x="400" y="-80">coerce?</label><label kind="assignment" x="376" y="-56">p_polling_station=true,
p_start=false</label><label kind="comments">coerce(ca)</label><nail x="432" y="-24"/></transition><transition><source ref="id19"/><target ref="id1"/><label kind="guard" x="0" y="0">(p_start || p_check1 || p_check3 || p_outside_ps)</label><label kind="assignment" x="376" y="40">p_polling_station=true,
p_start=false</label><label kind="comments">move_next</label><nail x="432" y="32"/></transition><transition><source ref="id1"/><target ref="id18"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps)) &amp;&amp; p_polling_station)</label><label kind="assignment" x="496" y="-32">p_printing=true,
p_polling_station=false</label><label kind="comments">give_document</label></transition><transition><source ref="id2"/><target ref="id8"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station &amp;&amp; !(p_has_ballot &amp;&amp; counter==0) &amp;&amp; !p_has_ballot &amp;&amp; !p_scanning &amp;&amp; !p_voted &amp;&amp; !(p_check2_ok || p_check2_fail) &amp;&amp; !p_cast &amp;&amp; !p_send &amp;&amp; !p_shred &amp;&amp; !p_check_request &amp;&amp; !p_checkWBB) &amp;&amp; true)</label><label kind="synchronisation" x="1296" y="-320">share!</label><label kind="assignment" x="1240" y="-296">p_checkWBB=true,
p_check_request=false</label><label kind="comments">share</label></transition><transition><source ref="id9"/><target ref="id2"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station &amp;&amp; !(p_has_ballot &amp;&amp; counter==0) &amp;&amp; !p_has_ballot &amp;&amp; !p_scanning &amp;&amp; !p_voted &amp;&amp; !(p_check2_ok || p_check2_fail) &amp;&amp; !p_cast &amp;&amp; !p_send &amp;&amp; !p_shred &amp;&amp; !p_check_request &amp;&amp; !p_checkWBB) &amp;&amp; true)</label><label kind="synchronisation" x="1264" y="-256">request?</label><label kind="assignment" x="1240" y="-248">p_check_request=true,
p_outside_ps=false</label><label kind="comments">request</label></transition><transition><source ref="id3"/><target ref="id7"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station &amp;&amp; !(p_has_ballot &amp;&amp; counter==0) &amp;&amp; !p_has_ballot &amp;&amp; !p_scanning &amp;&amp; !p_voted) &amp;&amp; (p_check2_ok || p_check2_fail))</label><label kind="assignment" x="1032" y="-56">p_check3=true,
p_check2_ok=false,
per_check3=true</label><label kind="comments">check3</label></transition><transition><source ref="id3"/><target ref="id11"/><label kind="guard" x="0" y="0">(p_start || p_check1 || p_check3 || p_outside_ps)</label><label kind="assignment" x="1104" y="-8">p_cast=true,
p_check2_ok=false</label><label kind="comments">move_next</label></transition><transition><source ref="id15"/><target ref="id3"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station &amp;&amp; !(p_has_ballot &amp;&amp; counter==0) &amp;&amp; !p_has_ballot &amp;&amp; !p_scanning) &amp;&amp; p_voted)</label><label kind="assignment" x="976" y="-8">p_check2_ok=true,
p_voted=false</label><label kind="comments">check2</label></transition><transition><source ref="id4"/><target ref="id6"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station &amp;&amp; !(p_has_ballot &amp;&amp; counter==0) &amp;&amp; !p_has_ballot &amp;&amp; !p_scanning &amp;&amp; !p_voted &amp;&amp; !(p_check2_ok || p_check2_fail) &amp;&amp; !p_cast &amp;&amp; !p_send &amp;&amp; !p_shred &amp;&amp; !p_check_request &amp;&amp; !p_checkWBB) &amp;&amp; true)</label><label kind="assignment" x="1280" y="-464">p_end=true,
p_checkWBB_ok=false</label><label kind="comments">finish</label></transition><transition><source ref="id8"/><target ref="id4"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station &amp;&amp; !(p_has_ballot &amp;&amp; counter==0) &amp;&amp; !p_has_ballot &amp;&amp; !p_scanning &amp;&amp; !p_voted &amp;&amp; !(p_check2_ok || p_check2_fail) &amp;&amp; !p_cast &amp;&amp; !p_send &amp;&amp; !p_shred &amp;&amp; !p_check_request) &amp;&amp; p_checkWBB)</label><label kind="assignment" x="1232" y="-408">p_checkWBB_ok=true,
p_checkWBB=false</label><label kind="comments">checkWBB</label></transition><transition><source ref="id5"/><target ref="id6"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station &amp;&amp; !(p_has_ballot &amp;&amp; counter==0) &amp;&amp; !p_has_ballot &amp;&amp; !p_scanning &amp;&amp; !p_voted &amp;&amp; !(p_check2_ok || p_check2_fail) &amp;&amp; !p_cast &amp;&amp; !p_send &amp;&amp; !p_shred &amp;&amp; !p_check_request &amp;&amp; !p_checkWBB) &amp;&amp; true)</label><label kind="assignment" x="1120" y="-464">p_end=true,
p_checkWBB_fail=false</label><label kind="comments">finish</label></transition><transition><source ref="id5"/><target ref="id14"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station &amp;&amp; !(p_has_ballot &amp;&amp; counter==0) &amp;&amp; !p_has_ballot &amp;&amp; !p_scanning &amp;&amp; !p_voted &amp;&amp; !(p_check2_ok || p_check2_fail) &amp;&amp; !p_cast &amp;&amp; !p_send &amp;&amp; !p_shred &amp;&amp; !p_check_request &amp;&amp; !p_checkWBB) &amp;&amp; true)</label><label kind="assignment" x="1008" y="-448">p_error=true,
p_checkWBB_fail=false</label><label kind="comments">raise_error</label></transition><transition><source ref="id8"/><target ref="id5"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station &amp;&amp; !(p_has_ballot &amp;&amp; counter==0) &amp;&amp; !p_has_ballot &amp;&amp; !p_scanning &amp;&amp; !p_voted &amp;&amp; !(p_check2_ok || p_check2_fail) &amp;&amp; !p_cast &amp;&amp; !p_send &amp;&amp; !p_shred &amp;&amp; !p_check_request) &amp;&amp; p_checkWBB)</label><label kind="assignment" x="1088" y="-392">p_checkWBB_fail=true,
p_checkWBB=false</label><label kind="comments">checkWBB</label></transition><transition><source ref="id7"/><target ref="id14"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station &amp;&amp; !(p_has_ballot &amp;&amp; counter==0) &amp;&amp; !p_has_ballot &amp;&amp; !p_scanning &amp;&amp; !p_voted &amp;&amp; !(p_check2_ok || p_check2_fail) &amp;&amp; !p_cast &amp;&amp; !p_send &amp;&amp; !p_shred &amp;&amp; !p_check_request &amp;&amp; !p_checkWBB) &amp;&amp; true)</label><label kind="assignment" x="1032" y="-296">p_error=true,
p_check3=false</label><label kind="comments">raise_error</label></transition><transition><source ref="id9"/><target ref="id8"/><label kind="guard" x="0" y="0">(p_start || p_check1 || p_check3 || p_outside_ps)</label><label kind="assignment" x="1112" y="-312">p_checkWBB=true,
p_outside_ps=false</label><label kind="comments">move_next</label></transition><transition><source ref="id10"/><target ref="id9"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station &amp;&amp; !(p_has_ballot &amp;&amp; counter==0) &amp;&amp; !p_has_ballot &amp;&amp; !p_scanning &amp;&amp; !p_voted &amp;&amp; !(p_check2_ok || p_check2_fail) &amp;&amp; !p_cast &amp;&amp; !p_send) &amp;&amp; p_shred)</label><label kind="assignment" x="1152" y="-192">p_outside_ps=true,
p_shred=false</label><label kind="comments">leave</label></transition><transition><source ref="id12"/><target ref="id11"/><label kind="guard" x="0" y="0">(p_start || p_check1 || p_check3 || p_outside_ps)</label><label kind="assignment" x="1048" y="-96">p_cast = true,
p_check2_fail = false</label><label kind="comments">move_next</label></transition><transition><source ref="id7"/><target ref="id11"/><label kind="guard" x="0" y="0">(p_start || p_check1 || p_check3 || p_outside_ps)</label><label kind="assignment" x="1128" y="-120">p_cast=true,
p_check3=false</label><label kind="comments">move_next</label></transition><transition><source ref="id12"/><target ref="id7"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station &amp;&amp; !(p_has_ballot &amp;&amp; counter==0) &amp;&amp; !p_has_ballot &amp;&amp; !p_scanning &amp;&amp; !p_voted) &amp;&amp; (p_check2_ok || p_check2_fail))</label><label kind="assignment" x="1016" y="-136">p_check3=true,
p_check2_fail=false,
per_check3=true</label><label kind="comments">check3</label></transition><transition><source ref="id12"/><target ref="id14"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station &amp;&amp; !(p_has_ballot &amp;&amp; counter==0) &amp;&amp; !p_has_ballot &amp;&amp; !p_scanning &amp;&amp; !p_voted &amp;&amp; !(p_check2_ok || p_check2_fail) &amp;&amp; !p_cast &amp;&amp; !p_send &amp;&amp; !p_shred &amp;&amp; !p_check_request &amp;&amp; !p_checkWBB) &amp;&amp; true)</label><label kind="assignment" x="840" y="-232">p_error=true,
p_check2_fail=false</label><label kind="comments">raise_error</label></transition><transition><source ref="id15"/><target ref="id12"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station &amp;&amp; !(p_has_ballot &amp;&amp; counter==0) &amp;&amp; !p_has_ballot &amp;&amp; !p_scanning) &amp;&amp; p_voted)</label><label kind="assignment" x="888" y="-80">p_check2_fail=true,
p_voted=false</label><label kind="comments">check2</label></transition><transition><source ref="id13"/><target ref="id18"/><label kind="guard" x="0" y="0">(p_start || p_check1 || p_check3 || p_outside_ps)</label><label kind="assignment" x="488" y="-96">p_printing=true,
p_check1=false</label><label kind="comments">move_next</label></transition><transition><source ref="id17"/><target ref="id13"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station) &amp;&amp; (p_has_ballot &amp;&amp; counter==0))</label><label kind="assignment" x="680" y="-120">counter++,
p_check1=true,
p_has_ballot=false,
per_check1=true</label><label kind="comments">check_ballot</label></transition><transition><source ref="id16"/><target ref="id15"/><label kind="select" x="836" y="-45">choice: int[1,no_candidates]</label><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station &amp;&amp; !(p_has_ballot &amp;&amp; counter==0) &amp;&amp; !p_has_ballot) &amp;&amp; p_scanning)</label><label kind="synchronisation" x="856" y="-24">enter_vote!</label><label kind="assignment" x="856" y="32">p_voted=true,
p_scanning=false,
v=choice</label><label kind="comments">enter_vote(v)</label></transition><transition><source ref="id17"/><target ref="id16"/><label kind="guard" x="0" y="0">((!(p_start || p_check1 || p_check3 || p_outside_ps) &amp;&amp; !p_polling_station &amp;&amp; !(p_has_ballot &amp;&amp; counter==0)) &amp;&amp; p_has_ballot)</label><label kind="assignment" x="728" y="32">p_scanning=true,
p_has_ballot=false</label><label kind="comments">scan_ballot</label></transition><transition><source ref="id18"/><target ref="id17"/><label kind="synchronisation" x="624" y="-24">print?</label><label kind="assignment" x="608" y="32">p_has_ballot=true,
p_printing=false</label></transition></template><template><name>Check2</name><location id="id20" x="-256" y="-208" color="#ff0000"><name x="-272" y="-240">error</name></location><location id="id21" x="184" y="-32"><name x="160" y="-16">check2_ok</name></location><location id="id22" x="64" y="-32"><name x="16" y="-16">check2_district</name></location><location id="id23" x="-88" y="-32"><name x="-112" y="-16">check2_2</name></location><location id="id24" x="-256" y="-32"><name x="-280" y="-16">check2_1</name></location><location id="id25" x="-440" y="-32"><name x="-464" y="-16">check2</name></location><init ref="id25"/><transition><source ref="id23"/><target ref="id20"/><label kind="comments">raise_error</label></transition><transition><source ref="id24"/><target ref="id20"/><label kind="comments">raise_error</label></transition><transition><source ref="id25"/><target ref="id20"/><label kind="comments">raise_error</label></transition><transition><source ref="id22"/><target ref="id21"/><label kind="comments">check2</label></transition><transition><source ref="id23"/><target ref="id22"/><label kind="comments">district_check</label></transition><transition><source ref="id24"/><target ref="id23"/><label kind="comments">second_check</label></transition><transition><source ref="id25"/><target ref="id24"/><label kind="comments">first_check</label></transition></template><template><name>PublicWBB</name><location id="id26" x="128" y="0"><name x="104" y="16">elaborating</name><committed/></location><location id="id27" x="0" y="0"><name x="-24" y="16">display</name><committed/></location><init ref="id27"/><transition><source ref="id26"/><target ref="id27"/><label kind="comments">display</label><nail x="64" y="24"/></transition><transition><source ref="id27"/><target ref="id26"/><label kind="synchronisation" x="24" y="-48">send_to_wbb?</label><nail x="64" y="-24"/></transition></template><template><name>Printer</name><location id="id28" x="224" y="0"><name x="216" y="-32">end</name><committed/></location><location id="id29" x="224" y="128"><name x="208" y="144">printer</name><committed/></location><location id="id30" x="0" y="128"><name x="-16" y="144">start</name><committed/></location><location id="id31" x="0" y="0"><name x="8" y="8">wait</name><committed/></location><init ref="id31"/><transition><source ref="id28"/><target ref="id31"/><label kind="comments">return</label></transition><transition><source ref="id29"/><target ref="id28"/><label kind="synchronisation" x="184" y="48">print!</label></transition><transition><source ref="id30"/><target ref="id29"/><label kind="comments">id_print_request == account</label></transition><transition><source ref="id31"/><target ref="id30"/><label kind="comments">print_request</label></transition></template><template><name>Check2SerialNumber</name><declaration>int i = 0, n = 10;

bool check_serial(int i) {
	return true;
}

bool check_serial1(int i) {
	return true;
}

bool check_serial2(int i) {
	return true;
}</declaration><location id="id32" x="400" y="0"><name x="352" y="16">receipt_check_sn</name></location><location id="id33" x="0" y="112" color="#ff0000"><name x="-16" y="128">error</name></location><location id="id34" x="560" y="0"><name x="528" y="16">check2_1</name></location><location id="id35" x="216" y="0"><name x="184" y="-32">ballot_check_sn</name></location><location id="id36" x="0" y="0"><name x="-64" y="-8">check2</name></location><init ref="id36"/><transition><source ref="id32"/><target ref="id36"/><label kind="guard" x="184" y="-112">i &lt; n</label><label kind="assignment" x="168" y="-72">i++</label><label kind="comments">move_next</label><nail x="200" y="-80"/></transition><transition><source ref="id32"/><target ref="id33"/><label kind="comments">raise_error</label></transition><transition><source ref="id35"/><target ref="id33"/><label kind="comments">raise_error</label></transition><transition><source ref="id32"/><target ref="id34"/><label kind="guard" x="448" y="-24">i == n</label><label kind="comments">end_first</label></transition><transition><source ref="id35"/><target ref="id32"/><label kind="guard" x="248" y="0">check_serial2(i)</label><label kind="comments">check_serial2(i)</label></transition><transition><source ref="id36"/><target ref="id33"/><label kind="comments">raise_error</label></transition><transition><source ref="id36"/><target ref="id35"/><label kind="guard" x="48" y="0">check_serial1(i)</label><label kind="comments">check_serial1(i)</label></transition></template><template><name>Check4SerialNumber</name><declaration>int i = 0, n = 10;

bool check_serial(int i) {
	return true;
}

bool check_serial1(int i) {
	return true;
}

bool check_serial2(int i) {
	return true;
}</declaration><location id="id37" x="352" y="0"><name x="328" y="-32">receipt_check_sn</name></location><location id="id38" x="0" y="112" color="#ff0000"><name x="-16" y="128">error</name></location><location id="id39" x="352" y="96"><name x="320" y="112">checkWBB_1</name></location><location id="id40" x="168" y="0"><name x="136" y="-32">wbb_check_sn</name></location><location id="id41" x="0" y="0"><name x="-88" y="-8">checkWBB</name></location><init ref="id41"/><transition><source ref="id37"/><target ref="id41"/><label kind="guard" x="184" y="-104">i &lt; n</label><label kind="assignment" x="192" y="-72">i++</label><label kind="comments">move_next</label><nail x="200" y="-80"/></transition><transition><source ref="id37"/><target ref="id38"/><label kind="comments">raise_error</label></transition><transition><source ref="id40"/><target ref="id38"/><label kind="comments">raise_error</label></transition><transition><source ref="id37"/><target ref="id39"/><label kind="guard" x="368" y="24">i == n</label><label kind="comments">end_first</label></transition><transition><source ref="id40"/><target ref="id37"/><label kind="guard" x="192" y="0">check_serial2(i)</label><label kind="comments">check_serial2(i)</label></transition><transition><source ref="id41"/><target ref="id38"/><label kind="comments">raise_error</label></transition><transition><source ref="id41"/><target ref="id40"/><label kind="guard" x="32" y="8">check_serial1(i)</label><label kind="comments">check_serial1(i)</label></transition></template><template><name>CheckPrintedPreferences</name><declaration>int i = 0, n = 10;

bool check_name(int i) {
	return true;
}

bool check_number(int i) {
	return true;
}</declaration><location id="id42" x="104" y="104" color="#ff0000"><name x="88" y="120">error</name></location><location id="id43" x="576" y="-8"><name x="552" y="8">check2_2</name></location><location id="id44" x="432" y="-8"><name x="384" y="8">receipt_check_pr</name></location><location id="id45" x="224" y="-8"><name x="192" y="-40">ballot_check_pr</name></location><location id="id46" x="0" y="-8"><name x="-80" y="-16">check2_1</name></location><init ref="id46"/><transition><source ref="id44"/><target ref="id46"/><label kind="guard" x="200" y="-112">i &lt; n</label><label kind="assignment" x="176" y="-80">i++</label><label kind="comments">move_next</label><nail x="208" y="-88"/></transition><transition><source ref="id45"/><target ref="id42"/><label kind="comments">raise_error</label></transition><transition><source ref="id46"/><target ref="id42"/><label kind="comments">raise_error</label></transition><transition><source ref="id44"/><target ref="id43"/><label kind="guard" x="480" y="-32">i == n</label><label kind="comments">end_second</label></transition><transition><source ref="id45"/><target ref="id44"/><label kind="guard" x="272" y="0">check_number(i)</label><label kind="comments">check_number(i)</label></transition><transition><source ref="id46"/><target ref="id45"/><label kind="guard" x="56" y="0">check_name(i)</label><label kind="comments">check_name(i)</label></transition></template><template><name>Check4Preferences</name><declaration>int j = 0, m = 10;

bool check_name(int i) {
	return true;
}

bool check_number(int i) {
	return true;
}

bool check_number1(int i) {
	return true;
}

bool check_number2(int i) {
	return true;
}</declaration><location id="id47" x="80" y="104" color="#ff0000"><name x="64" y="120">error</name></location><location id="id48" x="360" y="96"><name x="320" y="112">checkWBB_2</name></location><location id="id49" x="360" y="-8"><name x="336" y="-40">receipt_check_pr</name></location><location id="id50" x="168" y="-8"><name x="136" y="-40">wbb_check_pr</name></location><location id="id51" x="0" y="-8"><name x="-80" y="8">checkWBB_1</name></location><init ref="id51"/><transition><source ref="id49"/><target ref="id47"/><label kind="comments">raise_error</label></transition><transition><source ref="id49"/><target ref="id51"/><label kind="guard" x="192" y="-112">j &lt; m</label><label kind="assignment" x="168" y="-80">j++</label><label kind="comments">move_next</label><nail x="208" y="-88"/></transition><transition><source ref="id50"/><target ref="id47"/><label kind="comments">raise_error</label></transition><transition><source ref="id51"/><target ref="id47"/><label kind="comments">raise_error</label></transition><transition><source ref="id49"/><target ref="id48"/><label kind="guard" x="384" y="16">j == m</label><label kind="comments">end_second</label></transition><transition><source ref="id50"/><target ref="id49"/><label kind="guard" x="184" y="-8">check_number2(j)</label><label kind="comments">check_number2(j)</label></transition><transition><source ref="id51"/><target ref="id50"/><label kind="guard" x="24" y="-8">check_number1(j)</label><label kind="comments">check_number1(j)</label></transition></template><template><name>EBM</name><location id="id52" x="-168" y="-184"><committed/></location><location id="id53" x="208" y="-144"><name x="176" y="-176">elaboration</name><committed/></location><location id="id54" x="0" y="-144"><name x="-40" y="-152">end</name><committed/></location><location id="id55" x="208" y="0"><name x="184" y="16">wait_vote</name><committed/></location><location id="id56" x="0" y="0"><name x="-16" y="8">wait</name><committed/></location><init ref="id52"/><transition><source ref="id52"/><target ref="id56"/><label kind="comments">idle</label><nail x="-152" y="-120"/></transition><transition><source ref="id52"/><target ref="id56"/><label kind="synchronisation" x="-128" y="-192">infect_vm?</label><nail x="-72" y="-152"/></transition><transition><source ref="id55"/><target ref="id53"/><label kind="synchronisation" x="216" y="-80">enter_vote?</label><label kind="comments">enter_vote(v)</label></transition><transition><source ref="id56"/><target ref="id55"/><label kind="comments">bar_code</label></transition><transition><source ref="id54"/><target ref="id56"/><label kind="comments">return</label></transition><transition><source ref="id53"/><target ref="id54"/><label kind="comments">print</label></transition></template><template><name>CheckSerialNumber2</name><declaration>int i = 0;
int n = 10;

bool check_serial(int i) {
	return true;
}</declaration><location id="id57" x="0" y="112" color="#ff0000"><name x="-16" y="128">error</name></location><location id="id58" x="352" y="0"><name x="344" y="16">ok</name></location><location id="id59" x="224" y="0"><name x="200" y="16">compare</name></location><location id="id60" x="0" y="0"><name x="-48" y="-8">start</name></location><init ref="id60"/><transition><source ref="id60"/><target ref="id57"/><label kind="guard" x="-104" y="40">!check_serial(i)</label><label kind="comments">!compare_current</label></transition><transition><source ref="id59"/><target ref="id60"/><label kind="guard" x="88" y="-128">i &lt; n</label><label kind="assignment" x="80" y="-72">i++</label><label kind="comments">move_next</label><nail x="104" y="-104"/></transition><transition><source ref="id59"/><target ref="id58"/><label kind="guard" x="272" y="-24">i == n</label></transition><transition><source ref="id60"/><target ref="id59"/><label kind="guard" x="52" y="-30">check_serial(i)</label><label kind="comments">compare_current</label></transition></template><template><name>Check4</name><location id="id61" x="-24" y="40"><name x="-72" y="56">checkWBB_1_ok</name></location><location id="id62" x="-24" y="-56"><name x="-72" y="-40">checkWBB_1_fail</name></location><location id="id63" x="-264" y="40"><name x="-312" y="56">checkWBB_ok</name></location><location id="id64" x="-264" y="-64"><name x="-304" y="-48">checkWBB_fail</name></location><location id="id65" x="176" y="-104"><name x="136" y="-136">checkWBB_2_fail</name></location><location id="id66" x="-144" y="-168" color="#ff0000"><name x="-154" y="-198">error</name></location><location id="id67" x="200" y="-16"><name x="168" y="0">checkWBB_2_ok</name></location><location id="id68" x="88" y="-16"><name x="56" y="0">checkWBB_2</name></location><location id="id69" x="-144" y="-16"><name x="-184" y="0">checkWBB_1</name></location><location id="id70" x="-376" y="-16"><name x="-416" y="0">checkWBB</name></location><init ref="id70"/><transition><source ref="id65"/><target ref="id66"/><label kind="comments">raise_error</label></transition><transition><source ref="id62"/><target ref="id66"/><label kind="comments">raise_error</label></transition><transition><source ref="id61"/><target ref="id68"/><label kind="comments">ok</label></transition><transition><source ref="id69"/><target ref="id61"/><label kind="comments">check_preferences</label></transition><transition><source ref="id62"/><target ref="id68"/><label kind="comments">ok</label></transition><transition><source ref="id69"/><target ref="id62"/><label kind="comments">check_preferences</label></transition><transition><source ref="id63"/><target ref="id69"/><label kind="comments">ok</label></transition><transition><source ref="id70"/><target ref="id63"/><label kind="comments">check_serial</label></transition><transition><source ref="id64"/><target ref="id66"/><label kind="comments">raise_error</label></transition><transition><source ref="id64"/><target ref="id69"/><label kind="comments">ok</label></transition><transition><source ref="id70"/><target ref="id64"/><label kind="comments">check_serial</label></transition><transition><source ref="id68"/><target ref="id65"/><label kind="comments">checkWBB</label></transition><transition><source ref="id68"/><target ref="id67"/><label kind="comments">checkWBB</label></transition></template><template><name>Coercer</name><location id="id71" x="400" y="184"><name x="368" y="192">not_punish3</name></location><location id="id72" x="184" y="184"><name x="160" y="192">punish3</name></location><location id="id73" x="16" y="256"><name x="-24" y="264">not_punish2</name></location><location id="id74" x="-216" y="256"><name x="-240" y="264">punish2</name></location><location id="id75" x="-96" y="48"><name x="-160" y="48">check3</name><committed/></location><location id="id76" x="16" y="24"><name x="24" y="32">nshare3</name><committed/></location><location id="id77" x="-216" y="24"><name x="-264" y="32">share3</name><committed/></location><location id="id78" x="-104" y="-88"><name x="-80" y="-112">no_info</name><committed/></location><location id="id79" x="-368" y="144"><name x="-400" y="160">not_punish1</name></location><location id="id80" x="-552" y="152"><name x="-576" y="168">punish1</name></location><location id="id81" x="296" y="-48"><name x="240" y="-48">check2</name><committed/></location><location id="id82" x="-448" y="-64"><name x="-496" y="-64">check1</name><committed/></location><location id="id83" x="408" y="-88"><name x="408" y="-120">nshare2</name><committed/></location><location id="id84" x="184" y="-88"><name x="128" y="-112">share2</name><committed/></location><location id="id85" x="-328" y="-104"><name x="-312" y="-112">nshare1</name><committed/></location><location id="id86" x="-576" y="-96"><name x="-632" y="-96">share1</name><committed/></location><location id="id87" x="288" y="-192"><name x="296" y="-224">not_ok</name><committed/></location><location id="id88" x="-440" y="-192"><name x="-472" y="-216">ok</name><committed/></location><location id="id89" x="-104" y="-192"><name x="-88" y="-192">s_request</name><committed/></location><location id="id90" x="-104" y="-312"><name x="-88" y="-320">s_coerce</name><committed/></location><location id="id91" x="-104" y="-440"><name x="-88" y="-472">start</name><committed/></location><init ref="id91"/><transition><source ref="id76"/><target ref="id74"/><label kind="comments">punish</label></transition><transition><source ref="id76"/><target ref="id73"/><label kind="comments">not_punish</label></transition><transition><source ref="id77"/><target ref="id73"/><label kind="comments">not_punish</label></transition><transition><source ref="id77"/><target ref="id74"/><label kind="comments">punish</label></transition><transition><source ref="id84"/><target ref="id72"/><label kind="comments">punish</label></transition><transition><source ref="id84"/><target ref="id71"/><label kind="comments">not_punish</label></transition><transition><source ref="id83"/><target ref="id72"/><label kind="comments">punish</label></transition><transition><source ref="id83"/><target ref="id71"/><label kind="comments">not_punish</label></transition><transition><source ref="id81"/><target ref="id71"/><label kind="comments">not_punish</label></transition><transition><source ref="id81"/><target ref="id72"/><label kind="comments">punish</label></transition><transition><source ref="id75"/><target ref="id74"/><label kind="comments">punish</label></transition><transition><source ref="id75"/><target ref="id73"/><label kind="comments">not_punish</label></transition><transition><source ref="id76"/><target ref="id75"/><label kind="comments">check_wbb</label></transition><transition><source ref="id77"/><target ref="id75"/><label kind="comments">check_wbb</label></transition><transition><source ref="id78"/><target ref="id76"/><label kind="synchronisation" x="-40" y="-64">not_share?</label></transition><transition><source ref="id78"/><target ref="id77"/><label kind="synchronisation" x="-220" y="-47">share?</label></transition><transition><source ref="id89"/><target ref="id78"/><label kind="comments">move_next</label></transition><transition><source ref="id82"/><target ref="id79"/><label kind="comments">not_punish</label></transition><transition><source ref="id82"/><target ref="id80"/><label kind="comments">punish</label></transition><transition><source ref="id86"/><target ref="id79"/><label kind="comments">not_punish</label></transition><transition><source ref="id86"/><target ref="id80"/><label kind="comments">punish</label><nail x="-560" y="96"/></transition><transition><source ref="id85"/><target ref="id79"/><label kind="comments">not_punish</label></transition><transition><source ref="id85"/><target ref="id80"/><label kind="comments">punish</label></transition><transition><source ref="id83"/><target ref="id81"/><label kind="comments">check_wbb</label></transition><transition><source ref="id84"/><target ref="id81"/><label kind="comments">check_wbb</label></transition><transition><source ref="id85"/><target ref="id82"/><label kind="comments">check_wbb</label></transition><transition><source ref="id86"/><target ref="id82"/><label kind="comments">check_wbb</label></transition><transition><source ref="id87"/><target ref="id83"/><label kind="synchronisation" x="344" y="-176">not_share?</label></transition><transition><source ref="id87"/><target ref="id84"/><label kind="synchronisation" x="192" y="-168">share?</label></transition><transition><source ref="id88"/><target ref="id85"/><label kind="synchronisation" x="-376" y="-168">not_share?</label></transition><transition><source ref="id88"/><target ref="id86"/><label kind="synchronisation" x="-560" y="-176">share?</label></transition><transition><source ref="id89"/><target ref="id87"/><label kind="synchronisation" x="72" y="-224">notify_not_ok?</label></transition><transition><source ref="id89"/><target ref="id88"/><label kind="synchronisation" x="-280" y="-224">notify_ok?</label></transition><transition><source ref="id90"/><target ref="id89"/><label kind="synchronisation" x="-96" y="-256">request!</label></transition><transition><source ref="id91"/><target ref="id90"/><label kind="synchronisation" x="-96" y="-392">coerce!</label><label kind="comments">coerce(ca)</label></transition></template><template><name>Intruder</name><location id="id92" x="208" y="-312"><name x="232" y="-320">s_notify_ok</name></location><location id="id93" x="208" y="16"><name x="232" y="8">s_notify_not_ok</name></location><location id="id94" x="-144" y="-144"><name x="-144" y="-136">infection</name><committed/></location><location id="id95" x="208" y="-208"><name x="128" y="-208">ca_eq_v</name><committed/></location><location id="id96" x="208" y="-72"><name x="112" y="-64">ca_not_eq_v</name><committed/></location><location id="id97" x="208" y="-144"><name x="224" y="-152">capture</name><committed/></location><location id="id98" x="-32" y="-144"><name x="-24" y="-136">listen</name><committed/></location><location id="id99" x="-312" y="-144"><name x="-304" y="-136">start</name><committed/></location><init ref="id99"/><transition><source ref="id95"/><target ref="id92"/><label kind="synchronisation" x="224" y="-272">notify_ok!</label></transition><transition><source ref="id96"/><target ref="id93"/><label kind="synchronisation" x="216" y="-40">notify_not_ok!</label></transition><transition><source ref="id94"/><target ref="id98"/><label kind="synchronisation" x="-128" y="-168">infect_vm!</label></transition><transition><source ref="id99"/><target ref="id94"/><label kind="select" x="-288" y="-189">choice: int[1,no_candidates]</label><label kind="assignment" x="-296" y="-168">ca=choice</label><label kind="comments">select_candidate(ca)</label></transition><transition><source ref="id97"/><target ref="id95"/><label kind="guard" x="240" y="-200">ca==v</label><label kind="comments">check_vote(v)</label></transition><transition><source ref="id97"/><target ref="id96"/><label kind="guard" x="240" y="-128">ca!=v</label><label kind="comments">check_vote(v)</label></transition><transition><source ref="id98"/><target ref="id97"/><label kind="synchronisation" x="48" y="-168">enter_vote?</label><label kind="comments">enter_vote(v)</label></transition></template><system>// Place template instantiations here.
//Process = Template();
//v1 = Voter();
//v2=Voter();
//v3=Voter();
//v4=Voter();
// List one or more processes to be composed into a system.
system Voter, Printer, EBM, PublicWBB;</system></nta>